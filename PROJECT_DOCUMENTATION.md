# Ntumai Mobile App - Complete Project Documentation\n\n## Project Overview\n\n**Ntumai** is a comprehensive on-demand delivery and tasking platform mobile application built with React Native, NativeWind, and Zustand. The app supports three main user roles: Customers, Taskers/Drivers, and Vendors.\n\n### Key Features\n\n#### Customer Features\n- **Marketplace**: Browse vendors and products\n- **Food Delivery**: Order food from restaurants\n- **P2P Delivery**: Send parcels to others\n- **Errands/Tasks**: Create tasks for taskers\n- **Order Tracking**: Real-time order tracking\n- **Wallet**: Manage balance and payments\n- **Profile**: Manage account and preferences\n\n#### Tasker/Driver Features\n- **Job Management**: Accept and manage delivery jobs\n- **Earnings Tracking**: Monitor earnings and statistics\n- **Delivery Management**: Track active deliveries\n- **Online Status**: Toggle availability\n- **Wallet**: Manage earnings and withdrawals\n- **Profile**: Manage account information\n\n#### Vendor Features\n- **Product Management**: Add, edit, delete products\n- **Order Management**: View and manage orders\n- **Analytics**: Track sales and performance\n- **Dashboard**: View key metrics\n- **Profile**: Manage business information\n\n## Technology Stack\n\n### Frontend\n- **Framework**: React Native (Expo)\n- **Styling**: NativeWind (Tailwind CSS for React Native)\n- **State Management**: Zustand\n- **Navigation**: Expo Router\n- **Icons**: Expo Vector Icons (Feather)\n- **Language**: TypeScript\n\n### Development Tools\n- **Package Manager**: pnpm\n- **Build Tool**: Expo\n- **Testing**: Jest, React Native Testing Library\n- **Linting**: ESLint\n- **Formatting**: Prettier\n\n## Project Structure\n\n```\nntumai/\n├── app/                          # Expo Router screens\n│   ├── (auth)/                   # Authentication screens\n│   │   ├── SplashScreen.tsx\n│   │   ├── PhoneLogin.tsx\n│   │   ├── OtpVerification.tsx\n│   │   ├── RoleSelection.tsx\n│   │   └── DriverOnboarding.tsx\n│   ├── (customer)/               # Customer screens\n│   │   ├── Home.tsx\n│   │   ├── Marketplace.tsx\n│   │   ├── VendorDetail.tsx\n│   │   ├── Cart.tsx\n│   │   ├── CheckoutScreen.tsx\n│   │   ├── OrderTrackingScreen.tsx\n│   │   ├── SendParcelScreen.tsx\n│   │   ├── DeliveryTrackingScreen.tsx\n│   │   └── DoTaskScreen.tsx\n│   ├── (tasker)/                 # Tasker/Driver screens\n│   │   ├── DriverDashboard.tsx\n│   │   ├── AvailableJobsScreen.tsx\n│   │   ├── JobDetailScreen.tsx\n│   │   └── EarningsScreen.tsx\n│   ├── (vendor)/                 # Vendor screens\n│   │   ├── VendorDashboard.tsx\n│   │   ├── ManageProductsScreen.tsx\n│   │   └── AnalyticsScreen.tsx\n│   ├── (shared)/                 # Shared screens\n│   │   ├── WalletScreen.tsx\n│   │   ├── ProfileScreen.tsx\n│   │   ├── EditProfileScreen.tsx\n│   │   ├── AddressesScreen.tsx\n│   │   └── PaymentMethodsScreen.tsx\n│   ├── _layout.tsx               # Root layout\n│   └── index.tsx                 # Entry point\n├── src/\n│   ├── api/                      # API services\n│   │   ├── client.ts             # API client configuration\n│   │   ├── types.ts              # API type definitions\n│   │   ├── mockData.ts           # Mock data generator\n│   │   └── mockServices.ts       # Mock API services\n│   ├── store/                    # Zustand stores\n│   │   ├── index.ts              # Store exports\n│   │   ├── slices/               # Store slices\n│   │   │   ├── authSlice.ts\n│   │   │   ├── userSlice.ts\n│   │   │   ├── cartSlice.ts\n│   │   │   ├── orderSlice.ts\n│   │   │   ├── marketplaceSlice.ts\n│   │   │   ├── deliverySlice.ts\n│   │   │   ├── taskSlice.ts\n│   │   │   ├── notificationSlice.ts\n│   │   │   ├── walletSlice.ts\n│   │   │   ├── driverSlice.ts\n│   │   │   └── vendorSlice.ts\n│   │   └── types.ts              # Store type definitions\n│   ├── components/               # Reusable components\n│   │   ├── index.ts              # Component exports\n│   │   ├── auth/                 # Auth components\n│   │   └── ui/                   # UI components\n│   ├── navigation/               # Navigation utilities\n│   │   ├── RoleBasedNavigator.tsx\n│   │   ├── RouteProtection.tsx\n│   │   └── NavigationHelpers.ts\n│   ├── hooks/                    # Custom React hooks\n│   │   └── index.ts\n│   ├── utils/                    # Utility functions\n│   │   ├── formatting.ts\n│   │   ├── validation.ts\n│   │   ├── storage.ts\n│   │   ├── api.ts\n│   │   └── ...\n│   ├── providers/                # Context providers\n│   │   ├── AppProvider.tsx\n│   │   ├── AuthProvider.tsx\n│   │   └── OtpProvider.tsx\n│   └── constants/                # App constants\n│       └── index.ts\n├── assets/                       # Static assets\n│   ├── fonts/\n│   └── images/\n├── global.css                    # Global styles\n├── tailwind.config.js            # Tailwind configuration\n├── app.json                      # Expo configuration\n├── package.json                  # Dependencies\n├── tsconfig.json                 # TypeScript configuration\n├── TESTING_GUIDE.md              # Testing documentation\n├── BUG_FIXES.md                  # Bug tracking\n├── API_INTEGRATION_GUIDE.md      # Backend integration guide\n└── README.md                     # Project README\n```\n\n## Installation & Setup\n\n### Prerequisites\n- Node.js 16+ and npm/pnpm\n- Expo CLI\n- iOS Simulator (for macOS) or Android Emulator\n\n### Installation Steps\n\n```bash\n# Clone the repository\ngit clone <repository-url>\ncd ntumai\n\n# Install dependencies\npnpm install\n\n# Start the Expo development server\npnpm start\n\n# Run on iOS simulator\npnpm ios\n\n# Run on Android emulator\npnpm android\n```\n\n## Development Workflow\n\n### Running the App\n\n```bash\n# Start development server\npnpm start\n\n# Press 'i' for iOS simulator\n# Press 'a' for Android emulator\n# Press 'w' for web\n```\n\n### Building for Production\n\n```bash\n# Build for iOS\neas build --platform ios\n\n# Build for Android\neas build --platform android\n\n# Build for both\neas build\n```\n\n### Code Quality\n\n```bash\n# Run linter\npnpm lint\n\n# Format code\npnpm format\n\n# Run tests\npnpm test\n```\n\n## Authentication Flow\n\n1. **Splash Screen**: Auto-routes based on auth state\n2. **Phone Login**: User enters phone number\n3. **OTP Verification**: User verifies OTP sent to phone\n4. **Role Selection**: User selects customer, tasker, or vendor\n5. **Driver Onboarding** (if tasker): Complete KYC steps\n6. **Home Screen**: Route to appropriate dashboard\n\n## State Management (Zustand)\n\n### Store Structure\n\nEach store slice follows this pattern:\n\n```typescript\ninterface StoreState {\n  // State\n  data: DataType[];\n  loading: boolean;\n  error: Error | null;\n  \n  // Actions\n  fetchData: () => Promise<void>;\n  updateData: (data: DataType) => void;\n  deleteData: (id: string) => void;\n}\n\nexport const useStoreSlice = create<StoreState>((set) => ({\n  data: [],\n  loading: false,\n  error: null,\n  \n  fetchData: async () => {\n    set({ loading: true });\n    try {\n      const data = await service.getData();\n      set({ data, error: null });\n    } catch (error) {\n      set({ error: error as Error });\n    } finally {\n      set({ loading: false });\n    }\n  },\n  // ... other actions\n}));\n```\n\n### Available Stores\n\n- **authStore**: Authentication state\n- **userStore**: User profile and settings\n- **cartStore**: Shopping cart\n- **orderStore**: Orders and order history\n- **marketplaceStore**: Vendors and products\n- **deliveryStore**: P2P deliveries\n- **taskStore**: Tasks and errands\n- **notificationStore**: Notifications\n- **walletStore**: Wallet and transactions\n- **driverStore**: Driver/tasker specific data\n- **vendorStore**: Vendor specific data\n\n## API Integration\n\n### Mock Services\n\nCurrently using mock services in `/src/api/mockServices.ts`. To integrate with real backend:\n\n1. Update API endpoints in `/src/api/client.ts`\n2. Replace mock service implementations with real API calls\n3. Implement authentication token management\n4. Add error handling and retry logic\n\nSee `API_INTEGRATION_GUIDE.md` for detailed instructions.\n\n## Navigation\n\n### Role-Based Routing\n\nThe app automatically routes users based on their role:\n\n- **Customer**: Routes to `/(customer)/Home`\n- **Tasker**: Routes to `/(tasker)/DriverDashboard`\n- **Vendor**: Routes to `/(vendor)/VendorDashboard`\n- **Unauthenticated**: Routes to `/(auth)/SplashScreen`\n\n### Navigation Helpers\n\nUse role-based navigation helpers:\n\n```typescript\nimport { useCustomerNavigation } from '@/src/navigation/NavigationHelpers';\n\nconst nav = useCustomerNavigation();\nnav.goMarketplace();\nnav.goCart();\nnav.goProfile();\n```\n\n## Styling with NativeWind\n\nThe app uses Tailwind CSS classes for styling:\n\n```typescript\n<View className=\"flex-1 bg-white px-6 py-4\">\n  <Text className=\"text-2xl font-bold text-gray-900\">Title</Text>\n  <TouchableOpacity className=\"bg-green-600 rounded-lg py-3\">\n    <Text className=\"text-white font-bold text-center\">Button</Text>\n  </TouchableOpacity>\n</View>\n```\n\n## Testing\n\nSee `TESTING_GUIDE.md` for comprehensive testing documentation.\n\n### Test Categories\n\n1. **Unit Tests**: Individual functions and utilities\n2. **Component Tests**: Component rendering and interactions\n3. **Integration Tests**: Feature flows and API integration\n4. **E2E Tests**: Complete user journeys\n\n## Performance Optimization\n\n- **Lazy Loading**: Screens and components loaded on demand\n- **Memoization**: Expensive components wrapped with React.memo\n- **FlatList Virtualization**: Long lists use virtualization\n- **Image Optimization**: Images properly sized and cached\n- **State Management**: Zustand for efficient state updates\n\n## Security\n\n- **Authentication**: OTP-based authentication\n- **Token Storage**: Secure storage using AsyncStorage\n- **API Security**: Token-based authorization\n- **Data Validation**: Input validation on all forms\n- **Error Handling**: Sensitive errors not exposed to users\n\n## Deployment\n\n### iOS\n\n```bash\neas build --platform ios --auto-submit\n```\n\n### Android\n\n```bash\neas build --platform android --auto-submit\n```\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Module not found**: Clear cache and reinstall\n   ```bash\n   rm -rf node_modules .expo\n   pnpm install\n   ```\n\n2. **Port already in use**: Change Expo port\n   ```bash\n   pnpm start -- --port 8081\n   ```\n\n3. **Build failures**: Check Node.js version and dependencies\n   ```bash\n   node --version  # Should be 16+\n   pnpm install    # Reinstall dependencies\n   ```\n\n## Contributing\n\n1. Create a feature branch\n2. Make changes\n3. Test thoroughly\n4. Submit pull request\n5. Code review and merge\n\n## Version History\n\n### v1.0.0 (Current)\n- Complete app implementation\n- All core features\n- Mock API services\n- Zustand state management\n- NativeWind styling\n\n## Future Roadmap\n\n- [ ] Real backend integration\n- [ ] Push notifications\n- [ ] Real-time tracking\n- [ ] Payment gateway integration\n- [ ] Analytics\n- [ ] Offline mode\n- [ ] Dark mode\n- [ ] Multi-language support\n\n## Support & Documentation\n\n- **API Integration**: See `API_INTEGRATION_GUIDE.md`\n- **Testing**: See `TESTING_GUIDE.md`\n- **Bug Tracking**: See `BUG_FIXES.md`\n- **Code Documentation**: Inline comments and JSDoc\n\n## License\n\nAll rights reserved.\n\n## Contact\n\nFor questions or support, contact the development team.\n
