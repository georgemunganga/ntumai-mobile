# Ntumai Mobile App - Complete API Schema & Endpoints\n\n**Document Version:** 1.0  \n**Last Updated:** December 10, 2025  \n**Status:** Ready for Backend Implementation\n\n---\n\n## Table of Contents\n\n1. [Base Configuration](#base-configuration)\n2. [Authentication Endpoints](#authentication-endpoints)\n3. [User Management Endpoints](#user-management-endpoints)\n4. [Marketplace Endpoints](#marketplace-endpoints)\n5. [Order Endpoints](#order-endpoints)\n6. [P2P Delivery Endpoints](#p2p-delivery-endpoints)\n7. [Task/Errand Endpoints](#taskerrand-endpoints)\n8. [Tasker Management Endpoints](#tasker-management-endpoints)\n9. [Vendor Management Endpoints](#vendor-management-endpoints)\n10. [Payment Endpoints](#payment-endpoints)\n11. [Wallet Endpoints](#wallet-endpoints)\n12. [Chat Endpoints](#chat-endpoints)\n13. [Notification Endpoints](#notification-endpoints)\n14. [WebSocket Events](#websocket-events)\n15. [Error Handling](#error-handling)\n16. [Response Formats](#response-formats)\n\n---\n\n## Base Configuration\n\n### API Base URL\n```\nProduction: https://api.ntumai.com/v1\nStaging: https://staging-api.ntumai.com/v1\nDevelopment: http://localhost:3000/v1\n```\n\n### WebSocket Base URL\n```\nProduction: wss://ws.ntumai.com\nStaging: wss://staging-ws.ntumai.com\nDevelopment: ws://localhost:3001\n```\n\n### Headers\n```\nContent-Type: application/json\nAuthorization: Bearer {token}\nX-API-Version: 1.0\nX-Client-Version: 1.0.0\nX-Device-ID: {device_id}\n```\n\n---\n\n## Authentication Endpoints\n\n### 1. Send OTP\n**Endpoint:** `POST /auth/send-otp`\n\n**Request:**\n```json\n{\n  \"email\": \"user@example.com\",\n  \"phone\": \"+1234567890\",\n  \"method\": \"email\" | \"sms\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"OTP sent successfully\",\n  \"data\": {\n    \"sessionId\": \"session_123456\",\n    \"expiresIn\": 600,\n    \"method\": \"email\"\n  }\n}\n```\n\n---\n\n### 2. Verify OTP\n**Endpoint:** `POST /auth/verify-otp`\n\n**Request:**\n```json\n{\n  \"sessionId\": \"session_123456\",\n  \"otp\": \"123456\",\n  \"email\": \"user@example.com\",\n  \"phone\": \"+1234567890\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"OTP verified\",\n  \"data\": {\n    \"userId\": \"user_123\",\n    \"email\": \"user@example.com\",\n    \"phone\": \"+1234567890\",\n    \"isNewUser\": true,\n    \"requiresRoleSelection\": true\n  }\n}\n```\n\n---\n\n### 3. Select Role\n**Endpoint:** `POST /auth/select-role`\n\n**Request:**\n```json\n{\n  \"userId\": \"user_123\",\n  \"role\": \"customer\" | \"tasker\" | \"vendor\",\n  \"referralCode\": \"REF123\" (optional)\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Role selected\",\n  \"data\": {\n    \"userId\": \"user_123\",\n    \"role\": \"customer\",\n    \"accessToken\": \"eyJhbGciOiJIUzI1NiIs...\",\n    \"refreshToken\": \"eyJhbGciOiJIUzI1NiIs...\",\n    \"expiresIn\": 3600,\n    \"user\": {\n      \"id\": \"user_123\",\n      \"email\": \"user@example.com\",\n      \"phone\": \"+1234567890\",\n      \"role\": \"customer\",\n      \"name\": \"John Doe\",\n      \"profilePhoto\": \"https://...\",\n      \"createdAt\": \"2025-12-10T10:00:00Z\"\n    }\n  }\n}\n```\n\n---\n\n### 4. Refresh Token\n**Endpoint:** `POST /auth/refresh-token`\n\n**Request:**\n```json\n{\n  \"refreshToken\": \"eyJhbGciOiJIUzI1NiIs...\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"accessToken\": \"eyJhbGciOiJIUzI1NiIs...\",\n    \"expiresIn\": 3600\n  }\n}\n```\n\n---\n\n### 5. Logout\n**Endpoint:** `POST /auth/logout`\n\n**Request:**\n```json\n{\n  \"userId\": \"user_123\",\n  \"deviceId\": \"device_123\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Logged out successfully\"\n}\n```\n\n---\n\n## User Management Endpoints\n\n### 1. Get User Profile\n**Endpoint:** `GET /users/{userId}`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"user_123\",\n    \"email\": \"user@example.com\",\n    \"phone\": \"+1234567890\",\n    \"name\": \"John Doe\",\n    \"role\": \"customer\",\n    \"profilePhoto\": \"https://...\",\n    \"dateOfBirth\": \"1990-01-01\",\n    \"gender\": \"male\",\n    \"bio\": \"Bio text\",\n    \"rating\": 4.5,\n    \"totalOrders\": 25,\n    \"totalDeliveries\": 0,\n    \"joinedAt\": \"2025-01-01T00:00:00Z\",\n    \"verified\": true,\n    \"preferences\": {\n      \"notifications\": true,\n      \"language\": \"en\",\n      \"currency\": \"USD\"\n    }\n  }\n}\n```\n\n---\n\n### 2. Update User Profile\n**Endpoint:** `PUT /users/{userId}`\n\n**Request:**\n```json\n{\n  \"name\": \"John Doe\",\n  \"profilePhoto\": \"base64_image_data\",\n  \"dateOfBirth\": \"1990-01-01\",\n  \"gender\": \"male\",\n  \"bio\": \"Bio text\",\n  \"preferences\": {\n    \"notifications\": true,\n    \"language\": \"en\",\n    \"currency\": \"USD\"\n  }\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Profile updated\",\n  \"data\": { /* updated user object */ }\n}\n```\n\n---\n\n### 3. Get User Addresses\n**Endpoint:** `GET /users/{userId}/addresses`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"addr_123\",\n      \"label\": \"Home\",\n      \"street\": \"123 Main St\",\n      \"city\": \"New York\",\n      \"state\": \"NY\",\n      \"zipCode\": \"10001\",\n      \"country\": \"USA\",\n      \"latitude\": 40.7128,\n      \"longitude\": -74.0060,\n      \"isDefault\": true,\n      \"createdAt\": \"2025-01-01T00:00:00Z\"\n    }\n  ]\n}\n```\n\n---\n\n### 4. Add Address\n**Endpoint:** `POST /users/{userId}/addresses`\n\n**Request:**\n```json\n{\n  \"label\": \"Home\",\n  \"street\": \"123 Main St\",\n  \"city\": \"New York\",\n  \"state\": \"NY\",\n  \"zipCode\": \"10001\",\n  \"country\": \"USA\",\n  \"latitude\": 40.7128,\n  \"longitude\": -74.0060,\n  \"isDefault\": false\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Address added\",\n  \"data\": { /* address object */ }\n}\n```\n\n---\n\n### 5. Update Address\n**Endpoint:** `PUT /users/{userId}/addresses/{addressId}`\n\n**Request:** (Same as Add Address)\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Address updated\",\n  \"data\": { /* address object */ }\n}\n```\n\n---\n\n### 6. Delete Address\n**Endpoint:** `DELETE /users/{userId}/addresses/{addressId}`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Address deleted\"\n}\n```\n\n---\n\n## Marketplace Endpoints\n\n### 1. Get All Vendors\n**Endpoint:** `GET /marketplace/vendors`\n\n**Query Parameters:**\n```\n?page=1&limit=20&search=restaurant&category=food&rating=4&sortBy=rating|distance|newest\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"vendors\": [\n      {\n        \"id\": \"vendor_123\",\n        \"name\": \"Restaurant Name\",\n        \"description\": \"Description\",\n        \"logo\": \"https://...\",\n        \"banner\": \"https://...\",\n        \"category\": \"food\",\n        \"rating\": 4.5,\n        \"reviewCount\": 150,\n        \"deliveryTime\": 30,\n        \"deliveryFee\": 2.5,\n        \"minOrder\": 10,\n        \"isOpen\": true,\n        \"distance\": 2.5,\n        \"tags\": [\"fast-food\", \"delivery\"],\n        \"createdAt\": \"2025-01-01T00:00:00Z\"\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 150,\n      \"totalPages\": 8\n    }\n  }\n}\n```\n\n---\n\n### 2. Get Vendor Details\n**Endpoint:** `GET /marketplace/vendors/{vendorId}`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"vendor_123\",\n    \"name\": \"Restaurant Name\",\n    \"description\": \"Description\",\n    \"logo\": \"https://...\",\n    \"banner\": \"https://...\",\n    \"category\": \"food\",\n    \"rating\": 4.5,\n    \"reviewCount\": 150,\n    \"deliveryTime\": 30,\n    \"deliveryFee\": 2.5,\n    \"minOrder\": 10,\n    \"isOpen\": true,\n    \"address\": \"123 Main St, New York\",\n    \"phone\": \"+1234567890\",\n    \"email\": \"vendor@example.com\",\n    \"operatingHours\": {\n      \"monday\": { \"open\": \"09:00\", \"close\": \"22:00\" },\n      \"tuesday\": { \"open\": \"09:00\", \"close\": \"22:00\" }\n    },\n    \"images\": [\"https://...\"],\n    \"tags\": [\"fast-food\", \"delivery\"],\n    \"createdAt\": \"2025-01-01T00:00:00Z\"\n  }\n}\n```\n\n---\n\n### 3. Get Products by Vendor\n**Endpoint:** `GET /marketplace/vendors/{vendorId}/products`\n\n**Query Parameters:**\n```\n?page=1&limit=20&category=category_id&search=product&sortBy=popularity|price|newest\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"products\": [\n      {\n        \"id\": \"product_123\",\n        \"vendorId\": \"vendor_123\",\n        \"name\": \"Product Name\",\n        \"description\": \"Product description\",\n        \"image\": \"https://...\",\n        \"category\": \"category_id\",\n        \"price\": 12.99,\n        \"originalPrice\": 15.99,\n        \"discount\": 18,\n        \"rating\": 4.5,\n        \"reviewCount\": 50,\n        \"stock\": 100,\n        \"inStock\": true,\n        \"tags\": [\"vegetarian\", \"spicy\"],\n        \"createdAt\": \"2025-01-01T00:00:00Z\"\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 150,\n      \"totalPages\": 8\n    }\n  }\n}\n```\n\n---\n\n### 4. Get Product Details\n**Endpoint:** `GET /marketplace/products/{productId}`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"product_123\",\n    \"vendorId\": \"vendor_123\",\n    \"vendorName\": \"Restaurant Name\",\n    \"name\": \"Product Name\",\n    \"description\": \"Product description\",\n    \"images\": [\"https://...\"],\n    \"category\": \"category_id\",\n    \"price\": 12.99,\n    \"originalPrice\": 15.99,\n    \"discount\": 18,\n    \"rating\": 4.5,\n    \"reviewCount\": 50,\n    \"stock\": 100,\n    \"inStock\": true,\n    \"tags\": [\"vegetarian\", \"spicy\"],\n    \"ingredients\": [\"ingredient1\", \"ingredient2\"],\n    \"nutrition\": {\n      \"calories\": 250,\n      \"protein\": 10,\n      \"carbs\": 30,\n      \"fat\": 8\n    },\n    \"reviews\": [\n      {\n        \"id\": \"review_123\",\n        \"userId\": \"user_123\",\n        \"userName\": \"John Doe\",\n        \"rating\": 5,\n        \"comment\": \"Great product!\",\n        \"createdAt\": \"2025-01-01T00:00:00Z\"\n      }\n    ],\n    \"createdAt\": \"2025-01-01T00:00:00Z\"\n  }\n}\n```\n\n---\n\n### 5. Search Products\n**Endpoint:** `GET /marketplace/search`\n\n**Query Parameters:**\n```\n?q=search_query&category=category_id&minPrice=0&maxPrice=100&rating=4&page=1&limit=20\n```\n\n**Response:** (Same as Get Products by Vendor)\n\n---\n\n### 6. Get Categories\n**Endpoint:** `GET /marketplace/categories`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"category_123\",\n      \"name\": \"Food\",\n      \"icon\": \"https://...\",\n      \"description\": \"Food and beverages\",\n      \"productCount\": 500,\n      \"subCategories\": [\n        {\n          \"id\": \"subcat_123\",\n          \"name\": \"Fast Food\",\n          \"productCount\": 200\n        }\n      ]\n    }\n  ]\n}\n```\n\n---\n\n## Order Endpoints\n\n### 1. Create Order\n**Endpoint:** `POST /orders`\n\n**Request:**\n```json\n{\n  \"vendorId\": \"vendor_123\",\n  \"items\": [\n    {\n      \"productId\": \"product_123\",\n      \"quantity\": 2,\n      \"price\": 12.99,\n      \"specialInstructions\": \"No onions\"\n    }\n  ],\n  \"deliveryAddressId\": \"addr_123\",\n  \"deliveryAddress\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"New York\",\n    \"state\": \"NY\",\n    \"zipCode\": \"10001\",\n    \"latitude\": 40.7128,\n    \"longitude\": -74.0060\n  },\n  \"paymentMethod\": \"card\" | \"wallet\" | \"cash\",\n  \"promoCode\": \"PROMO123\" (optional),\n  \"notes\": \"Ring doorbell twice\",\n  \"subtotal\": 25.98,\n  \"deliveryFee\": 2.5,\n  \"tax\": 2.35,\n  \"discount\": 2.5,\n  \"total\": 28.33\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Order created\",\n  \"data\": {\n    \"id\": \"order_123\",\n    \"vendorId\": \"vendor_123\",\n    \"userId\": \"user_123\",\n    \"items\": [ /* items array */ ],\n    \"deliveryAddress\": { /* address object */ },\n    \"paymentMethod\": \"card\",\n    \"status\": \"pending\",\n    \"subtotal\": 25.98,\n    \"deliveryFee\": 2.5,\n    \"tax\": 2.35,\n    \"discount\": 2.5,\n    \"total\": 28.33,\n    \"estimatedDeliveryTime\": 30,\n    \"createdAt\": \"2025-12-10T10:00:00Z\",\n    \"updatedAt\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n---\n\n### 2. Get Orders\n**Endpoint:** `GET /orders`\n\n**Query Parameters:**\n```\n?userId=user_123&status=pending|confirmed|preparing|on_the_way|delivered|cancelled&page=1&limit=20&sortBy=newest|oldest\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"orders\": [ /* orders array */ ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 50,\n      \"totalPages\": 3\n    }\n  }\n}\n```\n\n---\n\n### 3. Get Order Details\n**Endpoint:** `GET /orders/{orderId}`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"order_123\",\n    \"vendorId\": \"vendor_123\",\n    \"vendorName\": \"Restaurant Name\",\n    \"userId\": \"user_123\",\n    \"items\": [ /* items array */ ],\n    \"deliveryAddress\": { /* address object */ },\n    \"paymentMethod\": \"card\",\n    \"status\": \"on_the_way\",\n    \"subtotal\": 25.98,\n    \"deliveryFee\": 2.5,\n    \"tax\": 2.35,\n    \"discount\": 2.5,\n    \"total\": 28.33,\n    \"estimatedDeliveryTime\": 30,\n    \"tasker\": {\n      \"id\": \"tasker_123\",\n      \"name\": \"John Driver\",\n      \"phone\": \"+1234567890\",\n      \"photo\": \"https://...\",\n      \"rating\": 4.8,\n      \"vehicle\": \"Motorcycle\",\n      \"licensePlate\": \"ABC123\"\n    },\n    \"timeline\": [\n      {\n        \"status\": \"pending\",\n        \"timestamp\": \"2025-12-10T10:00:00Z\",\n        \"message\": \"Order placed\"\n      },\n      {\n        \"status\": \"confirmed\",\n        \"timestamp\": \"2025-12-10T10:05:00Z\",\n        \"message\": \"Order confirmed by vendor\"\n      }\n    ],\n    \"createdAt\": \"2025-12-10T10:00:00Z\",\n    \"updatedAt\": \"2025-12-10T10:15:00Z\"\n  }\n}\n```\n\n---\n\n### 4. Track Order\n**Endpoint:** `GET /orders/{orderId}/track`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"orderId\": \"order_123\",\n    \"status\": \"on_the_way\",\n    \"tasker\": {\n      \"id\": \"tasker_123\",\n      \"name\": \"John Driver\",\n      \"phone\": \"+1234567890\",\n      \"photo\": \"https://...\",\n      \"rating\": 4.8,\n      \"currentLocation\": {\n        \"latitude\": 40.7150,\n        \"longitude\": -74.0080,\n        \"timestamp\": \"2025-12-10T10:15:00Z\"\n      },\n      \"vehicle\": \"Motorcycle\",\n      \"licensePlate\": \"ABC123\"\n    },\n    \"estimatedArrivalTime\": \"2025-12-10T10:25:00Z\",\n    \"deliveryAddress\": { /* address object */ },\n    \"route\": [\n      {\n        \"latitude\": 40.7128,\n        \"longitude\": -74.0060,\n        \"timestamp\": \"2025-12-10T10:00:00Z\"\n      }\n    ]\n  }\n}\n```\n\n---\n\n### 5. Cancel Order\n**Endpoint:** `POST /orders/{orderId}/cancel`\n\n**Request:**\n```json\n{\n  \"reason\": \"Changed my mind\",\n  \"notes\": \"Additional notes\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Order cancelled\",\n  \"data\": {\n    \"id\": \"order_123\",\n    \"status\": \"cancelled\",\n    \"refundAmount\": 28.33,\n    \"refundStatus\": \"pending\",\n    \"cancellationReason\": \"Changed my mind\"\n  }\n}\n```\n\n---\n\n### 6. Rate Order\n**Endpoint:** `POST /orders/{orderId}/rate`\n\n**Request:**\n```json\n{\n  \"rating\": 5,\n  \"comment\": \"Great service!\",\n  \"vendorRating\": 5,\n  \"taskerRating\": 5,\n  \"photos\": [\"base64_image_data\"]\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Order rated\",\n  \"data\": {\n    \"id\": \"review_123\",\n    \"orderId\": \"order_123\",\n    \"rating\": 5,\n    \"comment\": \"Great service!\",\n    \"createdAt\": \"2025-12-10T10:30:00Z\"\n  }\n}\n```\n\n---\n\n## P2P Delivery Endpoints\n\n### 1. Create Delivery\n**Endpoint:** `POST /deliveries`\n\n**Request:**\n```json\n{\n  \"pickupLocation\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"New York\",\n    \"state\": \"NY\",\n    \"zipCode\": \"10001\",\n    \"latitude\": 40.7128,\n    \"longitude\": -74.0060,\n    \"contactName\": \"John Doe\",\n    \"contactPhone\": \"+1234567890\"\n  },\n  \"dropoffLocation\": {\n    \"street\": \"456 Oak Ave\",\n    \"city\": \"New York\",\n    \"state\": \"NY\",\n    \"zipCode\": \"10002\",\n    \"latitude\": 40.7150,\n    \"longitude\": -74.0080,\n    \"contactName\": \"Jane Doe\",\n    \"contactPhone\": \"+0987654321\"\n  },\n  \"itemDescription\": \"Package with documents\",\n  \"itemWeight\": 2.5,\n  \"itemValue\": 50,\n  \"specialInstructions\": \"Handle with care\",\n  \"preferredDeliveryTime\": \"2025-12-10T14:00:00Z\",\n  \"paymentMethod\": \"card\" | \"wallet\" | \"cash\",\n  \"estimatedPrice\": 5.5\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Delivery created\",\n  \"data\": {\n    \"id\": \"delivery_123\",\n    \"userId\": \"user_123\",\n    \"pickupLocation\": { /* location object */ },\n    \"dropoffLocation\": { /* location object */ },\n    \"itemDescription\": \"Package with documents\",\n    \"itemWeight\": 2.5,\n    \"itemValue\": 50,\n    \"status\": \"pending\",\n    \"paymentMethod\": \"card\",\n    \"estimatedPrice\": 5.5,\n    \"actualPrice\": null,\n    \"createdAt\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n---\n\n### 2. Get Deliveries\n**Endpoint:** `GET /deliveries`\n\n**Query Parameters:**\n```\n?userId=user_123&status=pending|assigned|picked_up|in_transit|delivered|cancelled&page=1&limit=20\n```\n\n**Response:** (Similar to orders)\n\n---\n\n### 3. Get Delivery Details\n**Endpoint:** `GET /deliveries/{deliveryId}`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"delivery_123\",\n    \"userId\": \"user_123\",\n    \"pickupLocation\": { /* location object */ },\n    \"dropoffLocation\": { /* location object */ },\n    \"itemDescription\": \"Package with documents\",\n    \"itemWeight\": 2.5,\n    \"itemValue\": 50,\n    \"status\": \"in_transit\",\n    \"tasker\": {\n      \"id\": \"tasker_123\",\n      \"name\": \"John Driver\",\n      \"phone\": \"+1234567890\",\n      \"photo\": \"https://...\",\n      \"rating\": 4.8,\n      \"currentLocation\": {\n        \"latitude\": 40.7140,\n        \"longitude\": -74.0070\n      }\n    },\n    \"estimatedDeliveryTime\": \"2025-12-10T14:30:00Z\",\n    \"actualDeliveryTime\": null,\n    \"paymentMethod\": \"card\",\n    \"estimatedPrice\": 5.5,\n    \"actualPrice\": 5.5,\n    \"createdAt\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n---\n\n### 4. Track Delivery\n**Endpoint:** `GET /deliveries/{deliveryId}/track`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"deliveryId\": \"delivery_123\",\n    \"status\": \"in_transit\",\n    \"tasker\": {\n      \"id\": \"tasker_123\",\n      \"name\": \"John Driver\",\n      \"phone\": \"+1234567890\",\n      \"photo\": \"https://...\",\n      \"currentLocation\": {\n        \"latitude\": 40.7140,\n        \"longitude\": -74.0070,\n        \"timestamp\": \"2025-12-10T14:15:00Z\"\n      }\n    },\n    \"estimatedArrivalTime\": \"2025-12-10T14:30:00Z\",\n    \"route\": [ /* route points */ ]\n  }\n}\n```\n\n---\n\n## Task/Errand Endpoints\n\n### 1. Create Task\n**Endpoint:** `POST /tasks`\n\n**Request:**\n```json\n{\n  \"title\": \"Buy groceries\",\n  \"description\": \"Buy milk, eggs, and bread from the supermarket\",\n  \"category\": \"shopping\" | \"delivery\" | \"errand\" | \"other\",\n  \"location\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"New York\",\n    \"state\": \"NY\",\n    \"zipCode\": \"10001\",\n    \"latitude\": 40.7128,\n    \"longitude\": -74.0060\n  },\n  \"budget\": 50,\n  \"deadline\": \"2025-12-10T18:00:00Z\",\n  \"priority\": \"low\" | \"medium\" | \"high\",\n  \"attachments\": [\"base64_image_data\"],\n  \"paymentMethod\": \"card\" | \"wallet\" | \"cash\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Task created\",\n  \"data\": {\n    \"id\": \"task_123\",\n    \"userId\": \"user_123\",\n    \"title\": \"Buy groceries\",\n    \"description\": \"Buy milk, eggs, and bread from the supermarket\",\n    \"category\": \"shopping\",\n    \"location\": { /* location object */ },\n    \"budget\": 50,\n    \"deadline\": \"2025-12-10T18:00:00Z\",\n    \"priority\": \"high\",\n    \"status\": \"open\",\n    \"applicants\": [],\n    \"assignedTasker\": null,\n    \"createdAt\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n---\n\n### 2. Get Tasks\n**Endpoint:** `GET /tasks`\n\n**Query Parameters:**\n```\n?userId=user_123&status=open|in_progress|completed|cancelled&category=shopping&page=1&limit=20\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"tasks\": [ /* tasks array */ ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 50,\n      \"totalPages\": 3\n    }\n  }\n}\n```\n\n---\n\n### 3. Get Task Details\n**Endpoint:** `GET /tasks/{taskId}`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"task_123\",\n    \"userId\": \"user_123\",\n    \"title\": \"Buy groceries\",\n    \"description\": \"Buy milk, eggs, and bread from the supermarket\",\n    \"category\": \"shopping\",\n    \"location\": { /* location object */ },\n    \"budget\": 50,\n    \"deadline\": \"2025-12-10T18:00:00Z\",\n    \"priority\": \"high\",\n    \"status\": \"in_progress\",\n    \"applicants\": [\n      {\n        \"id\": \"tasker_123\",\n        \"name\": \"John Tasker\",\n        \"photo\": \"https://...\",\n        \"rating\": 4.7,\n        \"bidAmount\": 45,\n        \"message\": \"I can do this task\",\n        \"appliedAt\": \"2025-12-10T10:05:00Z\"\n      }\n    ],\n    \"assignedTasker\": {\n      \"id\": \"tasker_123\",\n      \"name\": \"John Tasker\",\n      \"phone\": \"+1234567890\",\n      \"photo\": \"https://...\",\n      \"rating\": 4.7,\n      \"acceptedAmount\": 45,\n      \"acceptedAt\": \"2025-12-10T10:10:00Z\"\n    },\n    \"attachments\": [\"https://...\"],\n    \"createdAt\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n---\n\n### 4. Update Task Status\n**Endpoint:** `PUT /tasks/{taskId}/status`\n\n**Request:**\n```json\n{\n  \"status\": \"in_progress\" | \"completed\" | \"cancelled\",\n  \"notes\": \"Task completed successfully\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Task status updated\",\n  \"data\": { /* task object */ }\n}\n```\n\n---\n\n## Tasker Management Endpoints\n\n### 1. Start Onboarding\n**Endpoint:** `POST /taskers/onboard`\n\n**Request:**\n```json\n{\n  \"userId\": \"user_123\",\n  \"vehicleType\": \"motorcycle\" | \"car\" | \"bicycle\",\n  \"licenseNumber\": \"DL123456\",\n  \"licenseExpiry\": \"2026-12-31\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Onboarding started\",\n  \"data\": {\n    \"taskerId\": \"tasker_123\",\n    \"userId\": \"user_123\",\n    \"onboardingStep\": 1,\n    \"onboardingStatus\": \"in_progress\",\n    \"steps\": [\n      {\n        \"step\": 1,\n        \"name\": \"Vehicle Information\",\n        \"completed\": true\n      },\n      {\n        \"step\": 2,\n        \"name\": \"Document Upload\",\n        \"completed\": false\n      }\n    ]\n  }\n}\n```\n\n---\n\n### 2. Upload Documents\n**Endpoint:** `POST /taskers/{taskerId}/documents`\n\n**Request:**\n```json\n{\n  \"documentType\": \"license\" | \"insurance\" | \"vehicle_registration\" | \"bank_account\" | \"id_proof\",\n  \"documentFile\": \"base64_file_data\",\n  \"documentNumber\": \"DOC123456\",\n  \"expiryDate\": \"2026-12-31\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Document uploaded\",\n  \"data\": {\n    \"id\": \"doc_123\",\n    \"taskerId\": \"tasker_123\",\n    \"documentType\": \"license\",\n    \"documentNumber\": \"DOC123456\",\n    \"expiryDate\": \"2026-12-31\",\n    \"status\": \"pending\",\n    \"uploadedAt\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n---\n\n### 3. Get Available Jobs\n**Endpoint:** `GET /taskers/{taskerId}/available-jobs`\n\n**Query Parameters:**\n```\n?jobType=delivery|task|errand&category=food&radius=5&page=1&limit=20&sortBy=distance|earnings|newest\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"jobs\": [\n      {\n        \"id\": \"job_123\",\n        \"type\": \"delivery\",\n        \"title\": \"Deliver order\",\n        \"description\": \"Deliver food order to customer\",\n        \"pickupLocation\": { /* location object */ },\n        \"dropoffLocation\": { /* location object */ },\n        \"distance\": 2.5,\n        \"estimatedTime\": 20,\n        \"estimatedEarnings\": 5.5,\n        \"priority\": \"high\",\n        \"createdAt\": \"2025-12-10T10:00:00Z\",\n        \"expiresAt\": \"2025-12-10T10:30:00Z\"\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 150,\n      \"totalPages\": 8\n    }\n  }\n}\n```\n\n---\n\n### 4. Accept Job\n**Endpoint:** `POST /taskers/{taskerId}/jobs/{jobId}/accept`\n\n**Request:**\n```json\n{\n  \"acceptedAt\": \"2025-12-10T10:05:00Z\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Job accepted\",\n  \"data\": {\n    \"id\": \"job_123\",\n    \"taskerId\": \"tasker_123\",\n    \"status\": \"accepted\",\n    \"acceptedAt\": \"2025-12-10T10:05:00Z\",\n    \"estimatedEarnings\": 5.5\n  }\n}\n```\n\n---\n\n### 5. Complete Job\n**Endpoint:** `POST /taskers/{taskerId}/jobs/{jobId}/complete`\n\n**Request:**\n```json\n{\n  \"completedAt\": \"2025-12-10T10:25:00Z\",\n  \"proofPhotos\": [\"base64_image_data\"],\n  \"notes\": \"Job completed successfully\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Job completed\",\n  \"data\": {\n    \"id\": \"job_123\",\n    \"taskerId\": \"tasker_123\",\n    \"status\": \"completed\",\n    \"completedAt\": \"2025-12-10T10:25:00Z\",\n    \"actualEarnings\": 5.5,\n    \"paymentStatus\": \"pending\"\n  }\n}\n```\n\n---\n\n### 6. Get Earnings\n**Endpoint:** `GET /taskers/{taskerId}/earnings`\n\n**Query Parameters:**\n```\n?period=today|week|month|year&page=1&limit=20\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"period\": \"month\",\n    \"totalEarnings\": 1250.50,\n    \"totalJobs\": 45,\n    \"averageEarningsPerJob\": 27.79,\n    \"breakdown\": {\n      \"deliveries\": 800.50,\n      \"tasks\": 450.00\n    },\n    \"transactions\": [\n      {\n        \"id\": \"txn_123\",\n        \"jobId\": \"job_123\",\n        \"amount\": 5.5,\n        \"type\": \"delivery\",\n        \"status\": \"completed\",\n        \"completedAt\": \"2025-12-10T10:25:00Z\"\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 45,\n      \"totalPages\": 3\n    }\n  }\n}\n```\n\n---\n\n### 7. Get Performance\n**Endpoint:** `GET /taskers/{taskerId}/performance`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"taskerId\": \"tasker_123\",\n    \"rating\": 4.8,\n    \"reviewCount\": 150,\n    \"totalJobs\": 500,\n    \"completedJobs\": 495,\n    \"cancelledJobs\": 5,\n    \"completionRate\": 99,\n    \"averageDeliveryTime\": 18,\n    \"onTimeDeliveryRate\": 96,\n    \"acceptanceRate\": 85,\n    \"badges\": [\n      {\n        \"id\": \"badge_123\",\n        \"name\": \"Super Tasker\",\n        \"description\": \"Completed 500+ jobs\",\n        \"icon\": \"https://...\",\n        \"earnedAt\": \"2025-12-10T10:00:00Z\"\n      }\n    ],\n    \"probationStatus\": \"none\",\n    \"kpis\": {\n      \"acceptanceRate\": 85,\n      \"cancellationRate\": 1,\n      \"completionRate\": 99,\n      \"onTimeRate\": 96,\n      \"customerRating\": 4.8\n    }\n  }\n}\n```\n\n---\n\n## Vendor Management Endpoints\n\n### 1. Get Vendor Profile\n**Endpoint:** `GET /vendors/{vendorId}`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"vendor_123\",\n    \"userId\": \"user_123\",\n    \"name\": \"Restaurant Name\",\n    \"description\": \"Description\",\n    \"logo\": \"https://...\",\n    \"banner\": \"https://...\",\n    \"category\": \"food\",\n    \"rating\": 4.5,\n    \"reviewCount\": 150,\n    \"address\": \"123 Main St, New York\",\n    \"phone\": \"+1234567890\",\n    \"email\": \"vendor@example.com\",\n    \"operatingHours\": { /* hours object */ },\n    \"deliveryTime\": 30,\n    \"deliveryFee\": 2.5,\n    \"minOrder\": 10,\n    \"isOpen\": true,\n    \"verified\": true,\n    \"bankAccount\": {\n      \"accountHolderName\": \"Restaurant Name\",\n      \"accountNumber\": \"****1234\",\n      \"bankName\": \"Bank Name\",\n      \"verified\": true\n    },\n    \"createdAt\": \"2025-01-01T00:00:00Z\"\n  }\n}\n```\n\n---\n\n### 2. Update Vendor Profile\n**Endpoint:** `PUT /vendors/{vendorId}`\n\n**Request:**\n```json\n{\n  \"name\": \"Restaurant Name\",\n  \"description\": \"Description\",\n  \"logo\": \"base64_image_data\",\n  \"banner\": \"base64_image_data\",\n  \"phone\": \"+1234567890\",\n  \"email\": \"vendor@example.com\",\n  \"operatingHours\": { /* hours object */ },\n  \"deliveryTime\": 30,\n  \"deliveryFee\": 2.5,\n  \"minOrder\": 10\n}\n```\n\n**Response:** (Same as Get Vendor Profile)\n\n---\n\n### 3. Get Vendor Products\n**Endpoint:** `GET /vendors/{vendorId}/products`\n\n**Query Parameters:**\n```\n?category=category_id&page=1&limit=20&sortBy=popularity|price|newest\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"products\": [ /* products array */ ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 150,\n      \"totalPages\": 8\n    }\n  }\n}\n```\n\n---\n\n### 4. Add Product\n**Endpoint:** `POST /vendors/{vendorId}/products`\n\n**Request:**\n```json\n{\n  \"name\": \"Product Name\",\n  \"description\": \"Product description\",\n  \"image\": \"base64_image_data\",\n  \"category\": \"category_id\",\n  \"price\": 12.99,\n  \"originalPrice\": 15.99,\n  \"stock\": 100,\n  \"tags\": [\"vegetarian\", \"spicy\"],\n  \"ingredients\": [\"ingredient1\", \"ingredient2\"],\n  \"nutrition\": {\n    \"calories\": 250,\n    \"protein\": 10,\n    \"carbs\": 30,\n    \"fat\": 8\n  }\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Product added\",\n  \"data\": { /* product object */ }\n}\n```\n\n---\n\n### 5. Update Product\n**Endpoint:** `PUT /vendors/{vendorId}/products/{productId}`\n\n**Request:** (Same as Add Product)\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Product updated\",\n  \"data\": { /* product object */ }\n}\n```\n\n---\n\n### 6. Delete Product\n**Endpoint:** `DELETE /vendors/{vendorId}/products/{productId}`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Product deleted\"\n}\n```\n\n---\n\n### 7. Get Vendor Orders\n**Endpoint:** `GET /vendors/{vendorId}/orders`\n\n**Query Parameters:**\n```\n?status=pending|confirmed|preparing|ready|on_the_way|delivered|cancelled&page=1&limit=20&sortBy=newest|oldest\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"orders\": [ /* orders array */ ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 500,\n      \"totalPages\": 25\n    }\n  }\n}\n```\n\n---\n\n### 8. Get Vendor Analytics\n**Endpoint:** `GET /vendors/{vendorId}/analytics`\n\n**Query Parameters:**\n```\n?period=today|week|month|year\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"period\": \"month\",\n    \"totalOrders\": 150,\n    \"totalRevenue\": 3500.50,\n    \"averageOrderValue\": 23.34,\n    \"totalCustomers\": 120,\n    \"newCustomers\": 15,\n    \"rating\": 4.5,\n    \"topProducts\": [\n      {\n        \"id\": \"product_123\",\n        \"name\": \"Product Name\",\n        \"sales\": 50,\n        \"revenue\": 650\n      }\n    ],\n    \"dailyRevenue\": [\n      {\n        \"date\": \"2025-12-01\",\n        \"revenue\": 100,\n        \"orders\": 5\n      }\n    ]\n  }\n}\n```\n\n---\n\n## Payment Endpoints\n\n### 1. Process Payment\n**Endpoint:** `POST /payments/process`\n\n**Request:**\n```json\n{\n  \"orderId\": \"order_123\",\n  \"amount\": 28.33,\n  \"method\": \"card\" | \"wallet\" | \"cash\",\n  \"cardDetails\": {\n    \"cardNumber\": \"4111111111111111\",\n    \"expiryMonth\": 12,\n    \"expiryYear\": 2026,\n    \"cvv\": \"123\",\n    \"cardholderName\": \"John Doe\"\n  },\n  \"walletAmount\": 0,\n  \"promoCode\": \"PROMO123\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Payment processed\",\n  \"data\": {\n    \"transactionId\": \"txn_123\",\n    \"orderId\": \"order_123\",\n    \"amount\": 28.33,\n    \"method\": \"card\",\n    \"status\": \"success\",\n    \"timestamp\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n---\n\n### 2. Confirm Payment\n**Endpoint:** `POST /payments/{transactionId}/confirm`\n\n**Request:**\n```json\n{\n  \"otp\": \"123456\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Payment confirmed\",\n  \"data\": {\n    \"transactionId\": \"txn_123\",\n    \"status\": \"confirmed\",\n    \"confirmedAt\": \"2025-12-10T10:01:00Z\"\n  }\n}\n```\n\n---\n\n### 3. Get Payment Methods\n**Endpoint:** `GET /users/{userId}/payment-methods`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"pm_123\",\n      \"type\": \"card\",\n      \"cardNumber\": \"****1111\",\n      \"cardholderName\": \"John Doe\",\n      \"expiryMonth\": 12,\n      \"expiryYear\": 2026,\n      \"isDefault\": true,\n      \"createdAt\": \"2025-01-01T00:00:00Z\"\n    },\n    {\n      \"id\": \"pm_124\",\n      \"type\": \"wallet\",\n      \"balance\": 100.50,\n      \"createdAt\": \"2025-01-01T00:00:00Z\"\n    }\n  ]\n}\n```\n\n---\n\n### 4. Add Payment Method\n**Endpoint:** `POST /users/{userId}/payment-methods`\n\n**Request:**\n```json\n{\n  \"type\": \"card\",\n  \"cardNumber\": \"4111111111111111\",\n  \"expiryMonth\": 12,\n  \"expiryYear\": 2026,\n  \"cvv\": \"123\",\n  \"cardholderName\": \"John Doe\",\n  \"isDefault\": false\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Payment method added\",\n  \"data\": { /* payment method object */ }\n}\n```\n\n---\n\n## Wallet Endpoints\n\n### 1. Get Wallet Balance\n**Endpoint:** `GET /users/{userId}/wallet`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"userId\": \"user_123\",\n    \"balance\": 250.50,\n    \"currency\": \"USD\",\n    \"lastUpdated\": \"2025-12-10T10:00:00Z\",\n    \"floatBalance\": 100.00,\n    \"pendingAmount\": 50.00\n  }\n}\n```\n\n---\n\n### 2. Get Wallet Transactions\n**Endpoint:** `GET /users/{userId}/wallet/transactions`\n\n**Query Parameters:**\n```\n?type=credit|debit|all&page=1&limit=20&sortBy=newest|oldest\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"transactions\": [\n      {\n        \"id\": \"txn_123\",\n        \"type\": \"credit\",\n        \"amount\": 50.00,\n        \"description\": \"Refund for order\",\n        \"orderId\": \"order_123\",\n        \"status\": \"completed\",\n        \"timestamp\": \"2025-12-10T10:00:00Z\"\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 150,\n      \"totalPages\": 8\n    }\n  }\n}\n```\n\n---\n\n### 3. Add Money to Wallet\n**Endpoint:** `POST /users/{userId}/wallet/add-money`\n\n**Request:**\n```json\n{\n  \"amount\": 100.00,\n  \"paymentMethod\": \"card\" | \"bank_transfer\",\n  \"cardId\": \"pm_123\" (optional)\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Money added to wallet\",\n  \"data\": {\n    \"transactionId\": \"txn_123\",\n    \"amount\": 100.00,\n    \"newBalance\": 350.50,\n    \"status\": \"success\"\n  }\n}\n```\n\n---\n\n### 4. Withdraw Money from Wallet\n**Endpoint:** `POST /users/{userId}/wallet/withdraw`\n\n**Request:**\n```json\n{\n  \"amount\": 50.00,\n  \"bankAccountId\": \"ba_123\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Withdrawal initiated\",\n  \"data\": {\n    \"transactionId\": \"txn_123\",\n    \"amount\": 50.00,\n    \"newBalance\": 200.50,\n    \"status\": \"pending\",\n    \"estimatedArrival\": \"2025-12-12T10:00:00Z\"\n  }\n}\n```\n\n---\n\n## Chat Endpoints\n\n### 1. Get Chats\n**Endpoint:** `GET /chats`\n\n**Query Parameters:**\n```\n?userId=user_123&page=1&limit=20&sortBy=newest|oldest\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"chats\": [\n      {\n        \"id\": \"chat_123\",\n        \"participantId\": \"user_456\",\n        \"participantName\": \"John Doe\",\n        \"participantPhoto\": \"https://...\",\n        \"lastMessage\": \"See you soon\",\n        \"lastMessageTime\": \"2025-12-10T10:00:00Z\",\n        \"unreadCount\": 2,\n        \"createdAt\": \"2025-12-01T00:00:00Z\"\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 50,\n      \"totalPages\": 3\n    }\n  }\n}\n```\n\n---\n\n### 2. Get Messages\n**Endpoint:** `GET /chats/{chatId}/messages`\n\n**Query Parameters:**\n```\n?page=1&limit=20&sortBy=newest|oldest\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"messages\": [\n      {\n        \"id\": \"msg_123\",\n        \"chatId\": \"chat_123\",\n        \"senderId\": \"user_123\",\n        \"senderName\": \"John Doe\",\n        \"senderPhoto\": \"https://...\",\n        \"message\": \"Hello, how are you?\",\n        \"type\": \"text\",\n        \"attachments\": [],\n        \"timestamp\": \"2025-12-10T10:00:00Z\",\n        \"isRead\": true\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 150,\n      \"totalPages\": 8\n    }\n  }\n}\n```\n\n---\n\n### 3. Send Message\n**Endpoint:** `POST /chats/{chatId}/messages`\n\n**Request:**\n```json\n{\n  \"message\": \"Hello, how are you?\",\n  \"type\": \"text\" | \"image\" | \"location\",\n  \"attachments\": [\"https://...\"],\n  \"replyToMessageId\": \"msg_123\" (optional)\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Message sent\",\n  \"data\": {\n    \"id\": \"msg_123\",\n    \"chatId\": \"chat_123\",\n    \"senderId\": \"user_123\",\n    \"message\": \"Hello, how are you?\",\n    \"type\": \"text\",\n    \"timestamp\": \"2025-12-10T10:00:00Z\",\n    \"isRead\": false\n  }\n}\n```\n\n---\n\n### 4. Mark Messages as Read\n**Endpoint:** `PUT /chats/{chatId}/messages/read`\n\n**Request:**\n```json\n{\n  \"messageIds\": [\"msg_123\", \"msg_124\"]\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Messages marked as read\"\n}\n```\n\n---\n\n## Notification Endpoints\n\n### 1. Get Notifications\n**Endpoint:** `GET /notifications`\n\n**Query Parameters:**\n```\n?userId=user_123&type=order|delivery|task|system&page=1&limit=20&sortBy=newest|oldest\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"notifications\": [\n      {\n        \"id\": \"notif_123\",\n        \"userId\": \"user_123\",\n        \"type\": \"order\",\n        \"title\": \"Order Confirmed\",\n        \"message\": \"Your order has been confirmed\",\n        \"data\": {\n          \"orderId\": \"order_123\",\n          \"action\": \"view_order\"\n        },\n        \"isRead\": false,\n        \"createdAt\": \"2025-12-10T10:00:00Z\"\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 100,\n      \"totalPages\": 5\n    }\n  }\n}\n```\n\n---\n\n### 2. Mark Notification as Read\n**Endpoint:** `PUT /notifications/{notificationId}/read`\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Notification marked as read\"\n}\n```\n\n---\n\n### 3. Register Push Token\n**Endpoint:** `POST /notifications/register-token`\n\n**Request:**\n```json\n{\n  \"userId\": \"user_123\",\n  \"pushToken\": \"ExponentPushToken[xxxxx]\",\n  \"deviceId\": \"device_123\",\n  \"platform\": \"ios\" | \"android\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Push token registered\"\n}\n```\n\n---\n\n## WebSocket Events\n\n### Connection\n```\nURL: wss://ws.ntumai.com\nAuth: Authorization: Bearer {token}\n```\n\n### Events to Emit (Client → Server)\n\n#### 1. Order Status Update\n```json\n{\n  \"event\": \"order:status_update\",\n  \"data\": {\n    \"orderId\": \"order_123\",\n    \"status\": \"on_the_way\",\n    \"timestamp\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n#### 2. Delivery Location Update\n```json\n{\n  \"event\": \"delivery:location_update\",\n  \"data\": {\n    \"deliveryId\": \"delivery_123\",\n    \"latitude\": 40.7128,\n    \"longitude\": -74.0060,\n    \"timestamp\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n#### 3. Chat Message\n```json\n{\n  \"event\": \"chat:message\",\n  \"data\": {\n    \"chatId\": \"chat_123\",\n    \"senderId\": \"user_123\",\n    \"message\": \"Hello!\",\n    \"timestamp\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n#### 4. Typing Indicator\n```json\n{\n  \"event\": \"chat:typing\",\n  \"data\": {\n    \"chatId\": \"chat_123\",\n    \"userId\": \"user_123\",\n    \"isTyping\": true\n  }\n}\n```\n\n#### 5. Job Offer\n```json\n{\n  \"event\": \"job:offer\",\n  \"data\": {\n    \"jobId\": \"job_123\",\n    \"taskerId\": \"tasker_123\",\n    \"jobType\": \"delivery\",\n    \"estimatedEarnings\": 5.5,\n    \"timestamp\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n### Events to Listen (Server → Client)\n\n#### 1. Order Status Changed\n```json\n{\n  \"event\": \"order:status_changed\",\n  \"data\": {\n    \"orderId\": \"order_123\",\n    \"status\": \"confirmed\",\n    \"message\": \"Order confirmed by vendor\",\n    \"timestamp\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n#### 2. Delivery Location Updated\n```json\n{\n  \"event\": \"delivery:location_updated\",\n  \"data\": {\n    \"deliveryId\": \"delivery_123\",\n    \"latitude\": 40.7128,\n    \"longitude\": -74.0060,\n    \"timestamp\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n#### 3. Chat Message Received\n```json\n{\n  \"event\": \"chat:message_received\",\n  \"data\": {\n    \"chatId\": \"chat_123\",\n    \"messageId\": \"msg_123\",\n    \"senderId\": \"user_456\",\n    \"message\": \"Hi there!\",\n    \"timestamp\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n#### 4. Typing Indicator\n```json\n{\n  \"event\": \"chat:user_typing\",\n  \"data\": {\n    \"chatId\": \"chat_123\",\n    \"userId\": \"user_456\",\n    \"isTyping\": true\n  }\n}\n```\n\n#### 5. Job Offer Received\n```json\n{\n  \"event\": \"job:offer_received\",\n  \"data\": {\n    \"jobId\": \"job_123\",\n    \"jobType\": \"delivery\",\n    \"title\": \"Deliver order\",\n    \"estimatedEarnings\": 5.5,\n    \"expiresAt\": \"2025-12-10T10:30:00Z\"\n  }\n}\n```\n\n#### 6. Notification\n```json\n{\n  \"event\": \"notification:received\",\n  \"data\": {\n    \"notificationId\": \"notif_123\",\n    \"type\": \"order\",\n    \"title\": \"Order Confirmed\",\n    \"message\": \"Your order has been confirmed\",\n    \"data\": {\n      \"orderId\": \"order_123\"\n    },\n    \"timestamp\": \"2025-12-10T10:00:00Z\"\n  }\n}\n```\n\n---\n\n## Error Handling\n\n### Error Response Format\n```json\n{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"INVALID_REQUEST\",\n    \"message\": \"Invalid request parameters\",\n    \"details\": [\n      {\n        \"field\": \"email\",\n        \"message\": \"Email is required\"\n      }\n    ]\n  }\n}\n```\n\n### Error Codes\n\n| Code | HTTP Status | Description |\n|------|-------------|-------------|\n| INVALID_REQUEST | 400 | Invalid request parameters |\n| UNAUTHORIZED | 401 | Authentication required |\n| FORBIDDEN | 403 | Access denied |\n| NOT_FOUND | 404 | Resource not found |\n| CONFLICT | 409 | Resource conflict |\n| VALIDATION_ERROR | 422 | Validation failed |\n| RATE_LIMIT | 429 | Rate limit exceeded |\n| INTERNAL_ERROR | 500 | Internal server error |\n| SERVICE_UNAVAILABLE | 503 | Service unavailable |\n\n---\n\n## Response Formats\n\n### Success Response\n```json\n{\n  \"success\": true,\n  \"message\": \"Operation successful\",\n  \"data\": { /* response data */ }\n}\n```\n\n### Paginated Response\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"items\": [ /* items array */ ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 20,\n      \"total\": 100,\n      \"totalPages\": 5,\n      \"hasNextPage\": true,\n      \"hasPreviousPage\": false\n    }\n  }\n}\n```\n\n### Error Response\n```json\n{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"ERROR_CODE\",\n    \"message\": \"Error message\",\n    \"details\": [ /* error details */ ]\n  }\n}\n```\n\n---\n\n## Rate Limiting\n\n- **Default:** 100 requests per minute per user\n- **Authentication:** 10 requests per minute per IP\n- **Headers:** `X-RateLimit-Limit`, `X-RateLimit-Remaining`, `X-RateLimit-Reset`\n\n---\n\n## Pagination\n\n- **Default Page Size:** 20\n- **Max Page Size:** 100\n- **Query Parameters:** `page`, `limit`, `sortBy`\n\n---\n\n## Summary\n\nThis document provides a complete API schema for the Ntumai mobile application. All endpoints are ready for backend implementation.\n\n**Total Endpoints:** 100+  \n**Total WebSocket Events:** 12+  \n**Total Error Codes:** 9  \n\nFor questions or clarifications, refer to the API_INTEGRATION_GUIDE.md and TESTING_GUIDE.md documents.\n
