import React from 'react';\nimport { View, Text } from 'react-native';\nimport { useRouter } from 'expo-router';\nimport { useAuthStore } from '../store';\nimport { Feather } from '@expo/vector-icons';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  requiredRole?: 'customer' | 'tasker' | 'vendor';\n  requiredAuth?: boolean;\n}\n\n/**\n * ProtectedRoute Component\n * Ensures user has required authentication and role to access route\n */\nexport function ProtectedRoute({\n  children,\n  requiredRole,\n  requiredAuth = true,\n}: ProtectedRouteProps) {\n  const router = useRouter();\n  const { user, isAuthenticated } = useAuthStore();\n\n  // Check authentication\n  if (requiredAuth && !isAuthenticated) {\n    React.useEffect(() => {\n      router.replace('/(auth)/SplashScreen');\n    }, []);\n    return null;\n  }\n\n  // Check role\n  if (requiredRole && user?.role !== requiredRole) {\n    return (\n      <View className=\"flex-1 items-center justify-center bg-white\">\n        <Feather name=\"lock\" size={64} color=\"#D1D5DB\" />\n        <Text className=\"text-2xl font-bold text-gray-900 mt-4\">Access Denied</Text>\n        <Text className=\"text-gray-600 text-center mt-2 px-6\">\n          You don't have permission to access this page.\n        </Text>\n      </View>\n    );\n  }\n\n  return <>{children}</>;\n}\n\n/**\n * Permission Checker\n * Returns true if user has required permission\n */\nexport function usePermission(requiredRole?: 'customer' | 'tasker' | 'vendor') {\n  const { user, isAuthenticated } = useAuthStore();\n\n  if (!isAuthenticated) return false;\n  if (!requiredRole) return true;\n  return user?.role === requiredRole;\n}\n\n/**\n * Role Checker Hook\n * Returns current user role\n */\nexport function useUserRole() {\n  const { user } = useAuthStore();\n  return user?.role || null;\n}\n\n/**\n * Authentication Checker Hook\n * Returns authentication status\n */\nexport function useIsAuthenticated() {\n  const { isAuthenticated } = useAuthStore();\n  return isAuthenticated;\n}\n\n/**\n * Feature Access Checker\n * Checks if user can access specific features\n */\nexport function useFeatureAccess() {\n  const { user } = useAuthStore();\n\n  return {\n    canOrderFood: user?.role === 'customer',\n    canSendParcel: user?.role === 'customer',\n    canCreateTask: user?.role === 'customer',\n    canAcceptJobs: user?.role === 'tasker',\n    canManageProducts: user?.role === 'vendor',\n    canViewAnalytics: user?.role === 'vendor',\n    canWithdraw: user?.role === 'tasker' || user?.role === 'vendor',\n  };\n}\n
